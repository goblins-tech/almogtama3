<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Almogtama3</title>
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#1976d2" />
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png" />
  </head>
  <body>
    <app-root></app-root>

    <script>
      //todo: adblock detector
      //todo: copy load() to ngx-tools/load-scripts.ts
      function load(src, type = "script", attributes = {}, cb) {
        if (type == "css") {
          type = "link";
          attributes.rel = "stylesheet";
          attributes.type = "text/css";
        }

        if (type === "link") {
          attributes.href = src;
          attributes.crossorigin = true; //https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content#Cross-origin_fetches
        } else if (type == "script") {
          attributes.src = src;
          attributes.type = "text/javascript";
        }

        if (!("async" in attributes)) attributes.async = true;

        let el = document.createElement(type === "css" ? "link" : type);
        for (let key in attributes) {
          el.setAttribute(key, attributes[key]);
        }

        if (cb) {
          el.onload = () => cb("loaded");
          el.onreadystatechange = () => cb("ready");
        }
        document.getElementsByTagName("head")[0].appendChild(el);
      }

      //Google Tag Manager sh@gm (id: GTM-K8J7FKM)
      window["dataLayer"] = window["dataLayer"] || [];
      window["dataLayer"].push({
        "gtm.start": new Date().getTime(),
        event: "gtm.js"
      });
      load("//www.googletagmanager.com/gtm.js?id=GTM-K8J7FKM");

      load(
        "//fonts.googleapis.com/css?family=Roboto:300,400,500&amp;display=swap",
        "css"
      );
      load("//fonts.googleapis.com/icon?family=Material+Icons", "css");
    </script>

    <!-- load css & tag manager if <script> tag not supported -->
    <!-- todo: display instructions to enable javascript -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-K8J7FKM"
        height="0"
        width="0"
        style="display:none;visibility:hidden"
      ></iframe>
      <link rel="stylesheet" type="text/css"
      href="//fonts.googleapis.com/css?family=Roboto:300,400,500&amp;display=swap",
      "css"/>
      <link
        rel="stylesheet"
        type="text/css"
        href="//fonts.googleapis.com/icon?family=Material+Icons"
      />
    </noscript>
  </body>
</html>
